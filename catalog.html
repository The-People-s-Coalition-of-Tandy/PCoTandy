<html>

<script type="text/javascript" src="./catalogData.js"></script>

<script type="text/javascript">
  function showContent(e) {
    var currentActive = document.querySelector(".active-album");

    if (currentActive) {
      currentActive.classList.remove('active-album');
    }

    var x = e.classList.add('active-album');
    // var audio = document.getElementById("audio");
    //   audio.play();
  }

  function spanify(text) {
    console.log("start");
    let result = "";
    for (let i in text) {
      console.log(text[i]);
      text[i] === " " ? result += `<span>&nbsp</span>` : result += `<span>${text[i]}</span>`
    }
    console.log(result);
    return result;
  }

  function generateCatalog() {
    var output = '<ul>';
    albumList.forEach((album, i) => {
      const releaseNumber = `${'0'.repeat(3-(Math.log10((i ^ (i >> 31)) - (i >> 31)) | 0))}${i.toString}`;
      output += `
      <li onclick="showContent(this)">
        <div class="release-list-text">
          <div class="catalog-number" tabindex="${i}"><p>PCoT 000${i}</p></div>
          <div class="animate four"><span class="first-span">▣</span>${spanify && spanify(album.name)}<span class="last-span">▣</span></div>
        </div>
        <div class="line-draw" />

        <div class="album-expansion">
          <div class="img-container"><img src="${album.cover}"></div>
          <div class="album-info-section ${album.color}">
            <h1 class="title">${album.name}</h1>
            <h4 class="artist-name">${album.artists}</h4>
            <p class="album-copy">${album.description}</p>
            <br> <br>
            <p class="album-credits">${album.credits}</p>
            <div class="links">
              <div class="buttons">
                ${album.bandcamp ? "<a target='_blank' class='bc' href='" + album.bandcamp + "'>bandcamp</a>" : ""}
                ${album.instagram ? "<a target='_blank' class='in' href='" + album.instagram+ "'>instagram</a>" : ""}
                ${album.spotify ? "<a target='_blank' class='spotify' href='" + album.spotify + "'>spotify</a>" : ""}
                ${album.youtube ? "<a target='_blank' class='yt' href='" + album.youtube + "'>youtube</a>" : ""}    
              </div>
            </div>
          </div>
        </div>
      </li>`;
    });

    output += '</ul>';
    document.getElementById("catalog-container").innerHTML = output;
    VanillaTilt.init(document.querySelectorAll(".img-container img"), {
      glare: true,
      perspective: 700
    })
  }
</script>

<head>
  <link rel="stylesheet" href="catalog.css">
  <link rel="stylesheet" href="textAnimations.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,400;0,500;0,700;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet">

  <!-- for svg animation elie made -->
  <link rel="stylesheet" href="svgSplash.css" />
</head>

<!-- SVG END -->

<body onload="generateCatalog()" position="relative">
  <div class="list-column"></div>
  <hr size="1" />
  <hr size="2" />
  <hr size="3" />
  <hr size="4" />
  <hr size="5" />
  <button class="home">
    <a href="index.html" rel="noopener noreferrer">Home</a>
  </button>

  <div id="catalog-container">
  </div>

  <!-- svg wrapper -->
  <div class="loaderWrapper">

    <!-- SVG SPLASH ANIMATION -->
    <svg class="splash" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
      x="0px" y="0px" viewBox="0 0 1366 768" style="enable-background:new 0 0 1366 768;" xml:space="preserve">

      <defs>
        <!-- define star texture image -->
        <pattern id="star" x="80%" y="0" width="100%" height="100%">
          <image href="./Assets/SparkleTest.jpg" width="50">

          </image>
        </pattern>

      </defs>

      <!-- fade class  on Black Bars Group // I KNOW that was a bad name for the whole SVG but now i dont wanna change it-->
      <!-- THIS HTML IS CALLING 2 CSS SYLE SHEETS!!! THIS IS IN SVG TEST.CSS -->
      <g id="BlackBars" class="elementToFadeInAndOut">
        <g id="bg_rect">
          <rect id="bg" class="svgbg" x="0" y="0.5" width="1366" height="768" />
        </g>

        <path d="M631.4,338.4h103.1c0-4.6-3.7-8.3-8.3-8.3h-86.5C635.1,330.1,631.4,333.8,631.4,338.4z">
          <animateMotion dur="1.8s" path="m-631.4,0 L0,0" fill="freeze" />
        </path>
        <!-- <rect x="631.4" y="421.7" width="103.1" height="11.7"> -->
        <rect width="103.1" height="11.7">
          <animateMotion dur="2.3s" path="M0,421.7 L631.4,421.7" fill="freeze" />
        </rect>
        <!-- x="631.4" y="405.4"  -->
        <rect width="103.1" height="12.7">

          <animateMotion dur="2.6s" path="M0,405.4 L631.4,405.4" fill="freeze" />
        </rect>
        <!-- x="631.4" y="388.5"  -->
        <rect width="103.1" height="13.5">
          <animateMotion dur="2.1s" path="M0,388.5 L631.4,388.5" fill="freeze" />
        </rect>
        <!-- x="631.4" y="373.3"  -->
        <rect width="103.1" height="12.5">
          <animateMotion dur="2.s" path="M0,373.3 L631.4,373.3" fill="freeze" />
        </rect>
        <!-- x="631.4" y="357.3"  -->
        <rect width="103.1" height="12.4">

          <animateMotion dur="1.9s" path="M0,357.3 L631.4,357.3" fill="freeze" />

        </rect>
        <!-- x="631.4" y="341.1" -->
        <rect width="103.1" height="11.7">
          <animateMotion dur="2.05s" path="M0,341.1 L631.4,341.1" fill="freeze" />
        </rect>
        <!-- bottom -->
        <path
          d="M734.5,435.9H631.4c0,4.6,3.7,8.3,8.3,8.3h86.5C730.8,444.2,734.5,440.5,734.5,435.9C734.5,435.9,734.5,435.9,734.5,435.9z">
          <animateMotion dur="2s" path="m-631.4,0 L0,0" fill="freeze" />
        </path>
        <!-- tandy hourglass -->
        <polygon id="Hourglass_1_" class="st1"
          points="723.2,430.2 708.3,386.5 723.2,343.4 642.8,343.4 658.6,386.8 642.8,430.2">
          <animateMotion dur="2.8s" path="m800,0 L0,0" fill="freeze" />
        </polygon>
        <!-- C -->
        <path id="C_1_" class="st2"
          d="M698.8,399.1c-9.9-8.1-35.7-5.5-33.1,11.2c0.1,0.3,0.1,0.7,0.3,1c5.9,11.4,26.9,12.1,34.3,2.1">
          <animateMotion dur="3s" path="m0,399.1 L0,0" fill="freeze" />
        </path>

        <g id="T_1_">
          <line class="st2" x1="663.3" y1="354.9" x2="702.6" y2="354.9" />
          <line class="st2" x1="683" y1="382.9" x2="683" y2="354.9" />

          <animateMotion dur="3.s" path="m0,-382.9 L0,0" fill="freeze" />

        </g>
        <g id="sparkle">
          <polygon class="cls-1 sparkle1" fill="url(#star)"
            points="722.75 330.29 723.36 342.82 733.53 335.49 724.12 343.77 736.2 347.15 723.85 344.96 728.73 356.51 722.75 345.49 716.76 356.51 721.65 344.96 709.3 347.15 721.38 343.77 711.96 335.49 722.14 342.82 722.75 330.29" />
        </g>
      </g>
    </svg>
  </div>

  <audio id="audio" src="./Assets/Out Of the Blue.wav"></audio>
  <script type="text/javascript" src="./Scripts/vanilla-tilt.js"></script>
</body>

</html>